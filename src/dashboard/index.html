<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'">
    <link href="./styles.css" rel="stylesheet">
    <title>Jiminy Settings</title>
  </head>
  <body class="bg-white dark:bg-[#111] text-zinc-800 dark:text-zinc-200 font-sans h-screen overflow-hidden">
    <div class="relative h-full w-full flex">
      <!-- Sidebar -->
      <aside class="w-[140px] flex-none bg-zinc-50/90 dark:bg-zinc-900/60 border-r border-zinc-200 dark:border-zinc-800 flex flex-col pt-3 pb-3">
          <div class="px-4 mb-4 flex items-center gap-2">
            <img src="../icon.png" alt="" class="w-5 h-5 rounded-md object-cover shadow-sm">
            <span class="text-sm font-semibold tracking-tight text-zinc-900 dark:text-zinc-100">Jiminy</span>
          </div>

          <nav class="flex-1 px-2 space-y-1" role="tablist" aria-label="Settings Sections">
            <button
              class="sidebar-item"
              data-section-target="wizard"
              data-active="false"
              role="tab"
              aria-controls="section-wizard"
              aria-selected="false"
              type="button"
            >
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                <path d="M12 3v3m0 12v3m9-9h-3M6 12H3m14.1-7.1-2.1 2.1M9 15l-2.1 2.1m10.2 0L15 15M9 9 6.9 6.9" />
              </svg>
              Wizard
            </button>
            <button
              class="sidebar-item"
              data-section-target="general"
              data-active="true"
              role="tab"
              aria-controls="section-general"
              aria-selected="true"
              type="button"
            >
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z" />
                <path d="M19.4 15a1 1 0 0 0 .2 1.1l.1.1a2 2 0 0 1-2.8 2.8l-.1-.1a1 1 0 0 0-1.1-.2 1 1 0 0 0-.6.9V20a2 2 0 0 1-4 0v-.2a1 1 0 0 0-.6-.9 1 1 0 0 0-1.1.2l-.1.1a2 2 0 0 1-2.8-2.8l.1-.1a1 1 0 0 0 .2-1.1 1 1 0 0 0-.9-.6H4a2 2 0 0 1 0-4h.2a1 1 0 0 0 .9-.6 1 1 0 0 0-.2-1.1l-.1-.1a2 2 0 0 1 2.8-2.8l.1.1a1 1 0 0 0 1.1.2 1 1 0 0 0 .6-.9V4a2 2 0 0 1 4 0v.2a1 1 0 0 0 .6.9 1 1 0 0 0 1.1-.2l.1-.1a2 2 0 0 1 2.8 2.8l-.1.1a1 1 0 0 0-.2 1.1 1 1 0 0 0 .9.6H20a2 2 0 0 1 0 4h-.2a1 1 0 0 0-.9.6Z" />
              </svg>
              General
            </button>
            <button
              class="sidebar-item"
              data-section-target="recording"
              data-active="false"
              role="tab"
              aria-controls="section-recording"
              aria-selected="false"
              type="button"
            >
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                <rect x="3" y="7" width="13" height="10" rx="2" />
                <path d="M16 9.5 21 7v10l-5-2.5" />
              </svg>
              Recording
            </button>
            <button
              class="sidebar-item"
              data-section-target="hotkeys"
              data-active="false"
              role="tab"
              aria-controls="section-hotkeys"
              aria-selected="false"
              type="button"
            >
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                <rect x="3" y="7" width="18" height="10" rx="2" />
                <path d="M7 11h2m2 0h2m2 0h2M7 14h10" />
              </svg>
              Hotkeys
            </button>
            <button
              class="sidebar-item"
              data-section-target="history"
              data-active="false"
              role="tab"
              aria-controls="section-history"
              aria-selected="false"
              type="button"
            >
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                <path d="M3 12a9 9 0 1 0 9-9" />
                <path d="M3 3v6h6" />
                <path d="M12 7v5l3 3" />
              </svg>
              History
            </button>
            <button
              class="sidebar-item"
              data-section-target="updates"
              data-active="false"
              role="tab"
              aria-controls="section-updates"
              aria-selected="false"
              type="button"
            >
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                <path d="M12 3v4m0 0 3-3m-3 3-3-3" />
                <path d="M5 11a7 7 0 1 0 14 0" />
                <path d="M12 19v2" />
              </svg>
              Updates
            </button>
          </nav>

          <div class="px-3 mt-auto">
            <p class="text-xs text-zinc-400 dark:text-zinc-500 leading-relaxed">Open this window anytime from the menu bar icon.</p>
          </div>
        </aside>

      <!-- Content Area -->
      <main class="flex-1 flex flex-col h-full bg-white dark:bg-[#111]">
          <div id="settings-header" class="flex-none px-6 py-4 border-b border-zinc-100 dark:border-zinc-800/50 flex justify-between items-center">
            <div>
              <h2 id="section-title" class="text-sm font-semibold tracking-tight text-zinc-900 dark:text-zinc-100">General Settings</h2>
              <p id="section-subtitle" class="text-xs text-zinc-500 dark:text-zinc-400">Core app configuration and sync controls.</p>
            </div>
          </div>

          <div id="settings-content" class="flex-1 overflow-y-auto p-6 space-y-6 scrollbar-slim">
            <!-- General -->
            <section id="section-general" data-section-pane="general" role="tabpanel" aria-label="General settings" class="space-y-6">
              <section class="space-y-2">
                <div class="flex items-center justify-between">
                  <label for="context-folder-path" class="section-label">Primary Context</label>
                  <span id="context-folder-status" data-setting-status="context-folder-status" class="text-xs text-emerald-600 dark:text-emerald-400 hidden" aria-live="polite"></span>
                </div>
                <div class="input-ring flex items-center gap-2 px-3 py-2.5 bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg">
                  <div class="flex items-center justify-center w-6 h-6 rounded-md bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-400">
                    <svg viewBox="0 0 24 24" class="w-3.5 h-3.5" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                      <path d="M3 6.5A2.5 2.5 0 0 1 5.5 4H10l2 2h6.5A2.5 2.5 0 0 1 21 8.5v8A2.5 2.5 0 0 1 18.5 19h-13A2.5 2.5 0 0 1 3 16.5v-10Z" />
                    </svg>
                  </div>
                  <input
                    id="context-folder-path"
                    data-setting="context-folder-path"
                    type="text"
                    placeholder="No folder selected"
                    readonly
                    class="flex-1 bg-transparent text-xs font-medium text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none"
                  >
                  <button id="context-folder-choose" data-action="context-folder-choose" type="button" class="px-2.5 py-1.5 text-xs font-medium bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-md text-zinc-600 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed">Change</button>
                </div>
                <p id="context-folder-error" data-setting-error="context-folder-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
              </section>

              <hr class="border-zinc-100 dark:border-zinc-800">

              <section class="space-y-2">
                <label class="section-label">Intelligence</label>
                <div class="space-y-2">
                  <select id="llm-provider" data-setting="llm-provider" class="input-ring w-full appearance-none bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg py-2 px-3 text-xs font-medium text-zinc-900 dark:text-zinc-100 focus:outline-none cursor-pointer">
                    <option value="">Select provider...</option>
                    <option value="gemini">Gemini</option>
                    <option value="openai">OpenAI</option>
                    <option value="anthropic">Anthropic</option>
                  </select>
                  <p id="llm-provider-error" data-setting-error="llm-provider-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
                </div>

                <div class="space-y-2">
                  <div class="input-ring relative w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg">
                      <svg viewBox="0 0 24 24" class="absolute left-3 top-2.5 w-3.5 h-3.5 text-zinc-400" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                        <path d="M14.5 10.5a3.5 3.5 0 1 0-7 0 3.5 3.5 0 0 0 7 0Z" />
                        <path d="M12 14v3m0 0h6m-6 0l2 2m-2-2l2-2" />
                      </svg>
                      <input
                        id="llm-api-key"
                        data-setting="llm-api-key"
                        type="password"
                        placeholder="Not set"
                        autocomplete="off"
                        class="w-full bg-transparent text-xs text-zinc-700 dark:text-zinc-300 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none py-2 pl-8 pr-3"
                      >
                  </div>
                  <p id="llm-api-key-error" data-setting-error="llm-api-key-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
                  <span id="llm-api-key-status" data-setting-status="llm-api-key-status" class="text-xs text-emerald-600 dark:text-emerald-400 hidden" aria-live="polite"></span>
                </div>
              </section>

            </section>

            <section id="section-recording" data-section-pane="recording" role="tabpanel" aria-label="Recording settings" class="space-y-6 hidden">
              <section class="space-y-2">
                <div class="flex items-start justify-between gap-4">
                  <div class="space-y-1">
                    <label for="always-record-when-active" class="section-label">Record While Active</label>
                    <p class="text-xs text-zinc-500 dark:text-zinc-400">
                      Record screen while you are active. Saves low-fps clips to your context folder.
                    </p>
                  </div>
                  <label class="relative inline-flex items-center cursor-pointer">
                    <input
                      id="always-record-when-active"
                      data-setting="always-record-when-active"
                      type="checkbox"
                      class="sr-only peer"
                    >
                    <div class="w-10 h-5 bg-zinc-200 dark:bg-zinc-800 rounded-full peer peer-checked:bg-emerald-500 transition-colors"></div>
                    <div class="absolute left-0.5 top-0.5 w-4 h-4 bg-white rounded-full shadow-sm transition-transform peer-checked:translate-x-5"></div>
                  </label>
                </div>
                <p id="always-record-when-active-error" data-setting-error="always-record-when-active-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
                <span id="always-record-when-active-status" data-setting-status="always-record-when-active-status" class="text-xs text-emerald-600 dark:text-emerald-400 hidden" aria-live="polite"></span>
              </section>

              <section id="recording-details" class="space-y-3 hidden">
                <p class="text-xs text-zinc-500 dark:text-zinc-400">
                  Saved to <span id="recording-path" class="font-mono text-zinc-700 dark:text-zinc-200"></span>
                </p>
                <div class="flex items-center justify-between gap-3">
                  <p class="text-xs text-zinc-600 dark:text-zinc-300">
                    Status: <span id="recording-status" class="text-zinc-900 dark:text-zinc-100 font-medium">Not recording</span>
                  </p>
                  <button
                    id="recording-action"
                    type="button"
                    class="px-3 py-1.5 text-xs font-medium bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-md text-zinc-700 dark:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                  >Start recording</button>
                </div>
                <p id="recording-permission" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
              </section>

              <section id="recording-query" class="space-y-3 border-t border-zinc-100 dark:border-zinc-800 pt-4">
                <div class="space-y-1">
                  <h4 class="text-[10px] font-semibold uppercase tracking-wider text-zinc-500 dark:text-zinc-400">Ask About Recordings</h4>
                  <p class="text-xs text-zinc-500 dark:text-zinc-400">
                    Query a date range of recordings and get an answer from Gemini.
                  </p>
                </div>
                <p id="recording-query-availability" class="text-xs text-amber-600 dark:text-amber-400 hidden" role="alert" aria-live="polite"></p>
                <div class="space-y-2">
                  <label for="recording-query-question" class="section-label">Question</label>
                  <textarea
                    id="recording-query-question"
                    rows="3"
                    placeholder="Ask a question about your recordings..."
                    class="input-ring w-full resize-none rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 px-3 py-2 text-xs text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none"
                  ></textarea>
                </div>
                <div class="flex items-center gap-3">
                  <div class="flex-1 space-y-1">
                    <label for="recording-query-from" class="section-label">From</label>
                    <input
                      id="recording-query-from"
                      type="date"
                      class="input-ring w-full rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 px-3 py-2 text-xs text-zinc-900 dark:text-zinc-100 focus:outline-none"
                    >
                  </div>
                  <div class="flex-1 space-y-1">
                    <label for="recording-query-to" class="section-label">To</label>
                    <input
                      id="recording-query-to"
                      type="date"
                      class="input-ring w-full rounded-lg border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900 px-3 py-2 text-xs text-zinc-900 dark:text-zinc-100 focus:outline-none"
                    >
                  </div>
                </div>
                <p id="recording-query-estimate" class="text-xs text-zinc-500 dark:text-zinc-400 hidden" aria-live="polite"></p>
                <div class="flex items-center gap-2">
                  <button
                    id="recording-query-submit"
                    type="button"
                    class="px-3 py-1.5 text-xs font-medium bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-md text-zinc-700 dark:text-zinc-200 hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                  >Submit</button>
                  <span id="recording-query-spinner" class="recording-query-spinner hidden" aria-hidden="true"></span>
                  <span id="recording-query-status" class="text-xs text-zinc-500 dark:text-zinc-400" aria-live="polite"></span>
                </div>
                <p id="recording-query-path" class="text-xs text-zinc-500 dark:text-zinc-400 hidden" aria-live="polite"></p>
                <p id="recording-query-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
                <div id="recording-query-answer" class="recording-query-answer hidden"></div>
              </section>
            </section>

            <!-- Updates -->
            <section id="section-updates" data-section-pane="updates" role="tabpanel" aria-label="Updates" class="space-y-4 hidden">
              <div class="flex flex-wrap items-center gap-2">
                <button id="updates-check" data-action="updates-check" type="button" class="px-3 py-2 text-xs font-semibold bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed">Check for Updates</button>
                <span id="updates-status" data-setting-status="updates-status" class="text-xs text-emerald-600 dark:text-emerald-400 hidden" aria-live="polite"></span>
              </div>
              <div id="updates-progress" class="space-y-2 hidden" aria-live="polite">
                <div class="h-2 w-full rounded-full bg-zinc-100 dark:bg-zinc-800 overflow-hidden">
                  <div id="updates-progress-bar" class="h-full bg-emerald-500 transition-[width] duration-200" style="width: 0%"></div>
                </div>
                <span id="updates-progress-label" class="text-xs text-zinc-500 dark:text-zinc-400 hidden"></span>
              </div>
              <p id="updates-error" data-setting-error="updates-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
            </section>

            <!-- Hotkeys -->
            <section id="section-hotkeys" data-section-pane="hotkeys" role="tabpanel" aria-label="Hotkeys" class="space-y-4 hidden">
              <div>
                <h3 class="text-sm font-semibold text-zinc-900 dark:text-zinc-100">Keyboard Shortcuts</h3>
                <p class="text-xs text-zinc-500 dark:text-zinc-400">Click a field and press your desired key combination.</p>
              </div>

              <div class="space-y-3">
                <div class="flex items-center gap-3">
                  <label for="capture-hotkey" class="text-xs uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 w-28">Screen Capture</label>
                  <button
                    id="capture-hotkey"
                    type="button"
                    class="hotkey-recorder flex-1 px-3 py-2 text-xs bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-zinc-700 dark:text-zinc-300 focus:outline-none font-mono text-left cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors"
                    data-hotkey=""
                    data-hotkey-role="capture"
                  >Click to set...</button>
                </div>
                <div class="flex items-center gap-3">
                  <label for="recording-hotkey" class="text-xs uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 w-28">Screen Recording</label>
                  <button
                    id="recording-hotkey"
                    type="button"
                    class="hotkey-recorder flex-1 px-3 py-2 text-xs bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-zinc-700 dark:text-zinc-300 focus:outline-none font-mono text-left cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors"
                    data-hotkey=""
                    data-hotkey-role="recording"
                  >Click to set...</button>
                </div>
                <div class="flex items-center gap-3">
                  <label for="clipboard-hotkey" class="text-xs uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 w-28">Clipboard Copy</label>
                  <button
                    id="clipboard-hotkey"
                    type="button"
                    class="hotkey-recorder flex-1 px-3 py-2 text-xs bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-zinc-700 dark:text-zinc-300 focus:outline-none font-mono text-left cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors"
                    data-hotkey=""
                    data-hotkey-role="clipboard"
                  >Click to set...</button>
                </div>
              </div>

              <div class="flex flex-wrap items-center gap-2">
                <button id="hotkeys-save" data-action="hotkeys-save" type="button" class="px-3 py-2 text-xs font-semibold bg-indigo-600 hover:bg-indigo-700 border border-indigo-600 hover:border-indigo-700 rounded-lg text-white focus:outline-none transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed">Save Hotkeys</button>
                <button id="hotkeys-reset" data-action="hotkeys-reset" type="button" class="px-3 py-2 text-xs font-semibold bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors cursor-pointer">Reset Defaults</button>
                <span id="hotkeys-status" data-setting-status="hotkeys-status" class="text-xs text-emerald-600 dark:text-emerald-400 hidden" aria-live="polite"></span>
              </div>
              <p id="hotkeys-error" data-setting-error="hotkeys-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
            </section>

            <section id="section-history" data-section-pane="history" role="tabpanel" aria-label="History" class="space-y-4 hidden">
              <div>
                <h3 class="text-sm font-semibold text-zinc-900 dark:text-zinc-100">History</h3>
                <p class="text-xs text-zinc-500 dark:text-zinc-400">Recent captures and analysis flows.</p>
              </div>
              <p id="history-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
              <p id="history-empty" class="text-xs text-zinc-500 dark:text-zinc-400 hidden" aria-live="polite"></p>
              <div id="history-list" class="space-y-3"></div>
            </section>
          </div>

          <section id="section-wizard" data-section-pane="wizard" role="tabpanel" aria-label="Setup wizard" class="hidden flex-1 flex flex-col min-h-0">
            <div class="flex-none px-6 py-4 border-b border-zinc-100 dark:border-zinc-800/50 flex justify-between items-center">
              <div>
                <h2 class="text-sm font-semibold tracking-tight text-zinc-900 dark:text-zinc-100">Setup Wizard</h2>
                <p class="text-xs text-zinc-500 dark:text-zinc-400">Guided setup in four steps.</p>
              </div>
              <span id="wizard-complete-status" class="text-xs font-medium text-emerald-600 dark:text-emerald-400 hidden">Setup complete</span>
            </div>

            <div class="flex-none px-6 py-4 border-b border-zinc-100 dark:border-zinc-800/40">
              <div class="flex items-center justify-between relative">
                <div class="flex flex-col items-center gap-1.5 relative z-10" data-wizard-step-indicator="1">
                  <div class="w-7 h-7 rounded-full border border-zinc-200 dark:border-zinc-700 text-xs font-semibold text-zinc-500 flex items-center justify-center" data-wizard-step-circle="1">1</div>
                  <span class="text-xs font-medium text-zinc-500" data-wizard-step-label="1">Context</span>
                </div>
                <div class="flex-1 h-px bg-zinc-200 dark:bg-zinc-800 mx-2 relative">
                  <div class="absolute inset-y-0 left-0 bg-indigo-600 w-0 transition-all" data-wizard-step-connector="1"></div>
                </div>
                <div class="flex flex-col items-center gap-1.5 relative z-10" data-wizard-step-indicator="2">
                  <div class="w-7 h-7 rounded-full border border-zinc-200 dark:border-zinc-700 text-xs font-semibold text-zinc-500 flex items-center justify-center" data-wizard-step-circle="2">2</div>
                  <span class="text-xs font-medium text-zinc-500" data-wizard-step-label="2">Intelligence</span>
                </div>
                <div class="flex-1 h-px bg-zinc-200 dark:bg-zinc-800 mx-2 relative">
                  <div class="absolute inset-y-0 left-0 bg-indigo-600 w-0 transition-all" data-wizard-step-connector="2"></div>
                </div>
                <div class="flex flex-col items-center gap-1.5 relative z-10" data-wizard-step-indicator="3">
                  <div class="w-7 h-7 rounded-full border border-zinc-200 dark:border-zinc-700 text-xs font-semibold text-zinc-500 flex items-center justify-center" data-wizard-step-circle="3">3</div>
                  <span class="text-xs font-medium text-zinc-500" data-wizard-step-label="3">Recording</span>
                </div>
                <div class="flex-1 h-px bg-zinc-200 dark:bg-zinc-800 mx-2 relative">
                  <div class="absolute inset-y-0 left-0 bg-indigo-600 w-0 transition-all" data-wizard-step-connector="3"></div>
                </div>
                <div class="flex flex-col items-center gap-1.5 relative z-10" data-wizard-step-indicator="4">
                  <div class="w-7 h-7 rounded-full border border-zinc-200 dark:border-zinc-700 text-xs font-semibold text-zinc-500 flex items-center justify-center" data-wizard-step-circle="4">4</div>
                  <span class="text-xs font-medium text-zinc-500" data-wizard-step-label="4">Hotkeys</span>
                </div>
              </div>
            </div>

            <div class="flex-1 min-h-0 overflow-y-auto px-6 py-6 scrollbar-slim">
              <div data-wizard-step="1" class="max-w-[360px] mx-auto space-y-5">
                <div class="text-center space-y-1">
                  <h3 class="text-sm font-medium text-zinc-900 dark:text-zinc-100">Choose your primary context folder</h3>
                  <p class="text-xs text-zinc-500 dark:text-zinc-400">Jiminy will store captures and summaries inside this folder.</p>
                </div>
                <section class="space-y-2">
                  <div class="flex items-center justify-between">
                    <label for="wizard-context-folder-path" class="section-label">Primary Context</label>
                    <span id="wizard-context-folder-status" data-setting-status="context-folder-status" class="text-xs text-emerald-600 dark:text-emerald-400 hidden" aria-live="polite"></span>
                  </div>
                  <div class="input-ring flex items-center gap-2 px-3 py-2.5 bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg">
                    <div class="flex items-center justify-center w-6 h-6 rounded-md bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-400">
                      <svg viewBox="0 0 24 24" class="w-3.5 h-3.5" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                        <path d="M3 6.5A2.5 2.5 0 0 1 5.5 4H10l2 2h6.5A2.5 2.5 0 0 1 21 8.5v8A2.5 2.5 0 0 1 18.5 19h-13A2.5 2.5 0 0 1 3 16.5v-10Z" />
                      </svg>
                    </div>
                    <input
                      id="wizard-context-folder-path"
                      data-setting="context-folder-path"
                      type="text"
                      placeholder="No folder selected"
                      readonly
                      class="flex-1 bg-transparent text-xs font-medium text-zinc-900 dark:text-zinc-100 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none"
                    >
                    <button id="wizard-context-folder-choose" data-action="context-folder-choose" type="button" class="px-2.5 py-1.5 text-xs font-medium bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-md text-zinc-600 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed">Change</button>
                  </div>
                  <p id="wizard-context-folder-error" data-setting-error="context-folder-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
                </section>
              </div>

              <div data-wizard-step="2" class="max-w-[360px] mx-auto space-y-5 hidden">
                <div class="text-center space-y-1">
                  <h3 class="text-sm font-medium text-zinc-900 dark:text-zinc-100">Configure Intelligence</h3>
                  <p class="text-xs text-zinc-500 dark:text-zinc-400">Select your model provider and store your API key.</p>
                </div>
                <section class="space-y-2">
                  <label for="wizard-llm-provider" class="section-label">Provider</label>
                  <select id="wizard-llm-provider" data-setting="llm-provider" class="input-ring w-full appearance-none bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg py-2 px-3 text-xs font-medium text-zinc-900 dark:text-zinc-100 focus:outline-none cursor-pointer">
                    <option value="">Select provider...</option>
                    <option value="gemini">Gemini</option>
                    <option value="openai">OpenAI</option>
                    <option value="anthropic">Anthropic</option>
                  </select>
                  <p id="wizard-llm-provider-error" data-setting-error="llm-provider-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
                </section>
                <section class="space-y-2">
                  <label for="wizard-llm-api-key" class="section-label">API Key</label>
                  <div class="input-ring relative w-full bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg">
                      <svg viewBox="0 0 24 24" class="absolute left-3 top-2.5 w-3.5 h-3.5 text-zinc-400" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
                        <path d="M14.5 10.5a3.5 3.5 0 1 0-7 0 3.5 3.5 0 0 0 7 0Z" />
                        <path d="M12 14v3m0 0h6m-6 0l2 2m-2-2l2-2" />
                      </svg>
                      <input
                        id="wizard-llm-api-key"
                        data-setting="llm-api-key"
                        type="password"
                        placeholder="Not set"
                        autocomplete="off"
                        class="w-full bg-transparent text-xs text-zinc-700 dark:text-zinc-300 placeholder-zinc-400 dark:placeholder-zinc-500 focus:outline-none py-2 pl-8 pr-3"
                      >
                  </div>
                  <p id="wizard-llm-api-key-error" data-setting-error="llm-api-key-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
                  <span id="wizard-llm-api-key-status" data-setting-status="llm-api-key-status" class="text-xs text-emerald-600 dark:text-emerald-400 hidden" aria-live="polite"></span>
                </section>
              </div>

              <div data-wizard-step="3" class="max-w-[360px] mx-auto space-y-5 hidden">
                <div class="text-center space-y-1">
                  <h3 class="text-sm font-medium text-zinc-900 dark:text-zinc-100">Enable always-on recording</h3>
                  <p class="text-xs text-zinc-500 dark:text-zinc-400">Turn this on now or skip and decide later in Recording settings.</p>
                </div>
                <section class="space-y-2">
                  <div class="flex items-start justify-between gap-4">
                    <div class="space-y-1">
                      <label for="wizard-always-record-when-active" class="section-label">Record While Active</label>
                      <p class="text-xs text-zinc-500 dark:text-zinc-400">
                        Record screen while you are active. Saves low-fps clips to your context folder.
                      </p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                      <input
                        id="wizard-always-record-when-active"
                        data-setting="always-record-when-active"
                        type="checkbox"
                        class="sr-only peer"
                      >
                      <div class="w-10 h-5 bg-zinc-200 dark:bg-zinc-800 rounded-full peer peer-checked:bg-emerald-500 transition-colors"></div>
                      <div class="absolute left-0.5 top-0.5 w-4 h-4 bg-white rounded-full shadow-sm transition-transform peer-checked:translate-x-5"></div>
                    </label>
                  </div>
                  <p id="wizard-always-record-when-active-error" data-setting-error="always-record-when-active-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
                  <span id="wizard-always-record-when-active-status" data-setting-status="always-record-when-active-status" class="text-xs text-emerald-600 dark:text-emerald-400 hidden" aria-live="polite"></span>
                </section>
              </div>

              <div data-wizard-step="4" class="max-w-[360px] mx-auto space-y-5 hidden">
                <div class="text-center space-y-1">
                  <h3 class="text-sm font-medium text-zinc-900 dark:text-zinc-100">Review hotkeys</h3>
                  <p class="text-xs text-zinc-500 dark:text-zinc-400">Confirm shortcuts for the tools you will use most.</p>
                </div>
                <div class="space-y-3">
                  <div class="flex items-center gap-3">
                    <label for="wizard-capture-hotkey" class="text-xs uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 w-28">Screen Capture</label>
                    <button
                      id="wizard-capture-hotkey"
                      type="button"
                      class="hotkey-recorder flex-1 px-3 py-2 text-xs bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-zinc-700 dark:text-zinc-300 focus:outline-none font-mono text-left cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors"
                      data-hotkey=""
                      data-hotkey-role="capture"
                    >Click to set...</button>
                  </div>
                  <div class="flex items-center gap-3">
                    <label for="wizard-recording-hotkey" class="text-xs uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 w-28">Screen Recording</label>
                    <button
                      id="wizard-recording-hotkey"
                      type="button"
                      class="hotkey-recorder flex-1 px-3 py-2 text-xs bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-zinc-700 dark:text-zinc-300 focus:outline-none font-mono text-left cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors"
                      data-hotkey=""
                      data-hotkey-role="recording"
                    >Click to set...</button>
                  </div>
                  <div class="flex items-center gap-3">
                    <label for="wizard-clipboard-hotkey" class="text-xs uppercase tracking-wider font-semibold text-zinc-500 dark:text-zinc-400 w-28">Clipboard Copy</label>
                    <button
                      id="wizard-clipboard-hotkey"
                      type="button"
                      class="hotkey-recorder flex-1 px-3 py-2 text-xs bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg text-zinc-700 dark:text-zinc-300 focus:outline-none font-mono text-left cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors"
                      data-hotkey=""
                      data-hotkey-role="clipboard"
                    >Click to set...</button>
                  </div>
                </div>
                <div class="flex flex-wrap items-center gap-2">
                  <button id="wizard-hotkeys-save" data-action="hotkeys-save" type="button" class="px-3 py-2 text-xs font-semibold bg-indigo-600 hover:bg-indigo-700 border border-indigo-600 hover:border-indigo-700 rounded-lg text-white focus:outline-none transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed">Save Hotkeys</button>
                  <button id="wizard-hotkeys-reset" data-action="hotkeys-reset" type="button" class="px-3 py-2 text-xs font-semibold bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 rounded-lg text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-700 transition-colors cursor-pointer">Reset Defaults</button>
                  <span id="wizard-hotkeys-status" data-setting-status="hotkeys-status" class="text-xs text-emerald-600 dark:text-emerald-400 hidden" aria-live="polite"></span>
                </div>
                <p id="wizard-hotkeys-error" data-setting-error="hotkeys-error" class="text-xs text-red-600 dark:text-red-400 hidden" role="alert" aria-live="polite"></p>
              </div>
            </div>

            <div class="flex-none px-6 py-4 border-t border-zinc-100 dark:border-zinc-800 flex justify-between items-center bg-zinc-50/70 dark:bg-zinc-900/60">
              <button id="wizard-back" data-action="wizard-back" type="button" class="flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium text-zinc-600 dark:text-zinc-400 hover:bg-white dark:hover:bg-zinc-800 hover:text-zinc-900 dark:hover:text-zinc-200 border border-transparent hover:border-zinc-200 dark:hover:border-zinc-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                Back
              </button>
              <div class="flex items-center gap-2">
                <span id="wizard-step-status" class="text-xs text-zinc-400 hidden"></span>
                <button id="wizard-next" data-action="wizard-next" type="button" class="flex items-center gap-1.5 px-4 py-1.5 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-xs font-medium text-white shadow-sm shadow-indigo-200 dark:shadow-none hover:shadow-md hover:shadow-indigo-500/20 active:translate-y-px transition-all disabled:opacity-50 disabled:cursor-not-allowed">Next</button>
                <button id="wizard-done" data-action="wizard-done" type="button" class="hidden flex items-center gap-1.5 px-4 py-1.5 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-xs font-medium text-white shadow-sm shadow-indigo-200 dark:shadow-none hover:shadow-md hover:shadow-indigo-500/20 active:translate-y-px transition-all">Done</button>
              </div>
            </div>
          </section>
      </main>
    </div>

    <script src="./wizard.js"></script>
    <script src="./hotkeys.js"></script>
    <script src="./history.js"></script>
    <script src="./updates.js"></script>
    <script src="./recording.js"></script>
    <script src="./settings.js"></script>
    <script src="./module-loader.js"></script>
    <script src="./state.js"></script>
    <script src="./bootstrap/wizard.js"></script>
    <script src="./bootstrap/history.js"></script>
    <script src="./bootstrap/updates.js"></script>
    <script src="./bootstrap/recording.js"></script>
    <script src="./bootstrap/settings.js"></script>
    <script src="./bootstrap/hotkeys.js"></script>
    <script src="./renderer.js"></script>
  </body>
</html>
